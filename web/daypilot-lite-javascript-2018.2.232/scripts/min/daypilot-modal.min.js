/*
DayPilot Lite
Copyright (c) 2005 - 2018 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 2018.2.232-lite
*/
if(typeof(DayPilot)==='undefined'){DayPilot={};};(function(){'use strict';DayPilot.ModalStatic={};DayPilot.ModalStatic.list=[];DayPilot.ModalStatic.hide=function(){if(this.list.length>0){var $a=this.list.pop();if($a){$a.hide();}}};DayPilot.ModalStatic.remove=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){$c.splice(i,1);return;}}};DayPilot.ModalStatic.close=function($d){DayPilot.ModalStatic.result($d);DayPilot.ModalStatic.hide();};DayPilot.ModalStatic.result=function(r){var $c=DayPilot.ModalStatic.list;if($c.length>0){$c[$c.length-1].result=r;}};DayPilot.ModalStatic.displayed=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){return true;}};return false;};DayPilot.ModalStatic.stretch=function(){if(this.list.length>0){var $a=this.list[this.list.length-1];if($a){$a.stretch();}}};DayPilot.ModalStatic.last=function(){var $c=DayPilot.ModalStatic.list;if($c.length>0){return $c[$c.length-1];};return null;};var $e=function(){var style=document.createElement("style");style.setAttribute("type","text/css");if(!style.styleSheet){style.appendChild(document.createTextNode(""));};var h=document.head||document.getElementsByTagName('head')[0];h.appendChild(style);var $f=!!style.styleSheet;var $g={};$g.rules=[];$g.commit=function(){try{if($f){style.styleSheet.cssText=this.rules.join("\n");}}catch(e){}};$g.add=function($h,$i,$j){if($f){this.rules.push($h+"{"+$i+"\u007d");return;};if(style.sheet.insertRule){if(typeof $j==="undefined"){$j=style.sheet.cssRules.length;};style.sheet.insertRule($h+"{"+$i+"\u007d",$j);}else if(style.sheet.addRule){style.sheet.addRule($h,$i,$j);}else{throw "No CSS registration method found";}};return $g;};var $g=new $e();$g.add(".modal_default_main","border: 10px solid #ccc;");$g.add(".modal_default_inner","padding: 10px;");$g.add(".modal_default_input","padding: 10px 0px;");$g.add(".modal_default_buttons","padding: 10px 0px;");$g.add(".modal_default_background","opacity: 0.3; background-color: #000;");$g.add(".modal_min_main","border: 1px solid #ccc;");$g.add(".modal_min_background","opacity: 0.3; background-color: #000;");$g.commit();DayPilot.Modal=function($k){this.autoStretch=true;this.autoStretchFirstLoadOnly=false;this.className=null;this.theme="modal_default";this.disposeOnClose=true;this.dragDrop=true;this.loadingHtml=null;this.maxHeight=null;this.scrollWithPage=true;this.useIframe=true;this.zIndex=null;this.left=null;this.width=500;this.top=20;this.height=200;this.closed=null;this.onClosed=null;this.onShow=null;var $l=this;this.id='_'+new Date().getTime()+'n'+(Math.random()*10);this.$0c=false;this.$0d=null;this.$0e=null;this.showHtml=function($m){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};if(!this.div){this.$0f();};this.$0g();if(this.useIframe){var $n=function(p,$o){return function(){p.setInnerHTML(p.id+"iframe",$o);};};window.setTimeout($n(this,$m),0);}else{if($m.nodeType){this.div.appendChild($m);}else{this.div.innerHTML=$m;}};this.$0g();this.$0h();this.$0i();};this.$0j=function(){return this.corners&&this.corners.toLowerCase()==='rounded';};this.showUrl=function($p){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};if(this.useIframe){if(!this.div){this.$0f();};var $q=this.loadingHtml;if($q){this.iframe.src="about:blank";this.setInnerHTML(this.id+"iframe",$q);};this.re(this.iframe,"load",this.$0k);this.iframe.src=$p;this.$0g();this.$0h();this.$0i();}else{$l.$0l({"url":$p,"success":function($r){var $m=$r.request.responseText;$l.showHtml($m);},"error":function($r){$l.showHtml("Error loading the modal dialog");}})}};this.$0i=function(){if(typeof $l.onShow==="function"){var $r={};$r.root=$l.$0m();$l.onShow($r);}};this.$0m=function(){return $l.iframe?$l.iframe.contentWindow.document:$l.div;};this.$0l=function($s){var $t=new XMLHttpRequest();if(!$t){return;};var $u=$s.method||"GET";var $v=$s.success||function(){};var $w=$s.error||function(){};var $x=$s.data;var $p=$s.url;$t.open($u,$p,true);$t.setRequestHeader('Content-type','text/plain');$t.onreadystatechange=function(){if($t.readyState!==4)return;if($t.status!==200&&$t.status!==304){if($w){var $r={};$r.request=$t;$w($r);}else{if(window.console){console.log('HTTP error '+$t.status);}};return;};var $r={};$r.request=$t;$v($r);};if($t.readyState===4){return;};if(typeof $x==='object'){$x=JSON.stringify($x);};$t.send($x);};this.$0g=function(){var $y=window;var $z=document;var scrollY=$y.pageYOffset?$y.pageYOffset:(($z.documentElement&&$z.documentElement.scrollTop)?$z.documentElement.scrollTop:$z.body.scrollTop);var $A=function(){return $l.$0n().y;};if(this.theme){this.hideDiv.className=this.theme+"_background";};if(this.zIndex){this.hideDiv.style.zIndex=this.zIndex;};this.hideDiv.style.display='';window.setTimeout(function(){$l.hideDiv.onclick=function(){$l.hide({"backgroundClick":true});};},500);if(this.theme){this.div.className=this.theme+"_main";}else{this.div.className="";};if(this.className){this.div.className+=" "+this.className;};if(this.left){this.div.style.left=this.left+"px";}else{this.div.style.marginLeft='-'+Math.floor(this.width/2)+"px";};this.div.style.position='absolute';this.div.style.boxSizing="content-box";this.div.style.top=(scrollY+this.top)+'px';this.div.style.width=this.width+'px';if(this.zIndex){this.div.style.zIndex=this.zIndex;};if(this.height){if(this.useIframe||!this.autoStretch){this.div.style.height=this.height+'px';}else{this.div.style.height='';}};if(this.useIframe&&this.height){this.iframe.style.height=(this.height)+'px';};this.div.style.display='';DayPilot.ModalStatic.list.push(this);};this.$0k=function(){$l.iframe.contentWindow.modal=$l;if($l.autoStretch){$l.stretch();}};this.stretch=function(){var $A=function(){return $l.$0n().y;};var $B=function(){return $l.$0n().x;};if(this.useIframe){var $C=$B()-40;for(var w=this.width;w<$C&&this.$0o();w+=10){this.div.style.width=w+'px';this.div.style.marginLeft='-'+Math.floor(w/2)+"px";};var $D=this.maxHeight||$A()-2*this.top;for(var h=this.height;h<$D&&this.$0p();h+=10){this.iframe.style.height=(h)+'px';this.div.style.height=h+'px';};if(this.autoStretchFirstLoadOnly){this.ue(this.iframe,"load",this.$0k);}}else{this.div.style.height='';}};this.$0o=function(){var document=this.iframe.contentWindow.document;var $E=document.compatMode==='BackCompat'?document.body:document.documentElement;var $F=$E.scrollWidth;var $G=document.body.children;for(var i=0;i<$G.length;i++){var $H=$G[i].offsetLeft+$G[i].offsetWidth;$F=Math.max($F,$H);};var $I=$F>$E.clientWidth;return $I;};this.$0p=function(){var document=this.iframe.contentWindow.document;var $E=document.compatMode==='BackCompat'?document.body:document.documentElement;var $J=$E.scrollHeight;var $G=document.body.children;for(var i=0;i<$G.length;i++){var $H=$G[i].offsetTop+$G[i].offsetHeight;$J=Math.max($J,$H);};var $K=$J>$E.clientHeight;return $K;};this.$0n=function(){var $z=document;if($z.compatMode==="CSS1Compat"&&$z.documentElement&&$z.documentElement.clientWidth){var x=$z.documentElement.clientWidth;var y=$z.documentElement.clientHeight;return{x:x,y:y};}else{var x=$z.body.clientWidth;var y=$z.body.clientHeight;return{x:x,y:y};}};this.$0h=function(){if(this.$0c){return;};this.re(window,'resize',this.$0q);this.re(window,'scroll',this.$0r);if(this.dragDrop){this.re(document,'mousemove',this.$0s);this.re(document,'mouseup',this.$0t);};this.$0c=true;};this.$0u=function(e){if(e.target!==$l.div){return;};$l.div.style.cursor="move";$l.$0v();$l.$0e=$l.mc(e||window.event);$l.$0d={x:$l.div.offsetLeft,y:$l.div.offsetTop};};this.$0s=function(e){if(!$l.$0e){return;};var e=e||window.event;var $L=$l.mc(e);var x=$L.x-$l.$0e.x;var y=$L.y-$l.$0e.y;$l.div.style.marginLeft='0px';$l.div.style.top=($l.$0d.y+y)+"px";$l.div.style.left=($l.$0d.x+x)+"px";};this.$0t=function(e){if(!$l.$0e){return;};$l.$0w();$l.div.style.cursor=null;$l.$0e=null;};this.$0v=function(){if(!this.useIframe){return;};var $M=80;var $N=document.createElement("div");$N.style.backgroundColor="#ffffff";$N.style.filter="alpha(opacity="+$M+")";$N.style.opacity="0."+$M;$N.style.width="100%";$N.style.height=this.height+"px";$N.style.position="absolute";$N.style.left='0px';$N.style.top='0px';this.div.appendChild($N);this.mask=$N;};this.$0w=function(){if(!this.useIframe){return;};this.div.removeChild(this.mask);this.mask=null;};this.$0q=function(){$l.$0x;};this.$0r=function(){$l.$0x;};this.$0x=function(){if(!$l.hideDiv){return;};if(!$l.div){return;};if($l.hideDiv.style.display==='none'){return;};if($l.div.style.display==='none'){return;};var scrollY=window.pageYOffset?window.pageYOffset:((document.documentElement&&document.documentElement.scrollTop)?document.documentElement.scrollTop:document.body.scrollTop);if(!$l.scrollWithPage){$l.div.style.top=(scrollY+$l.top)+'px';}};this.re=function(el,ev,$O){if(el.addEventListener){el.addEventListener(ev,$O,false);}else if(el.attachEvent){el.attachEvent("on"+ev,$O);}};this.ue=function(el,ev,$O){if(el.removeEventListener){el.removeEventListener(ev,$O,false);}else if(el.detachEvent){el.detachEvent("on"+ev,$O);}};this.mc=function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY};};return{x:ev.clientX+document.documentElement.scrollLeft,y:ev.clientY+document.documentElement.scrollTop};};this.abs=function(element){var r={x:element.offsetLeft,y:element.offsetTop};while(element.offsetParent){element=element.offsetParent;r.x+=element.offsetLeft;r.y+=element.offsetTop;};return r;};this.$0f=function(){var $P=document.createElement("div");$P.id=this.id+"hide";$P.style.position='fixed';$P.style.left="0px";$P.style.top="0px";$P.style.right="0px";$P.style.bottom="0px";$P.oncontextmenu=function(){return false;};$P.onmousedown=function(){return false;};document.body.appendChild($P);var $Q=document.createElement("div");$Q.id=this.id+'popup';$Q.style.position='fixed';$Q.style.left='50%';$Q.style.top='0px';$Q.style.backgroundColor='white';$Q.style.width="50px";$Q.style.height="50px";if(this.dragDrop){$Q.onmousedown=this.$0u;};var $R=50;var $S=null;if(this.useIframe){$S=document.createElement("iframe");$S.id=this.id+"iframe";$S.name=this.id+"iframe";$S.frameBorder='0';$S.style.width='100%';$S.style.height=$R+'px';$Q.appendChild($S);};document.body.appendChild($Q);this.div=$Q;this.iframe=$S;this.hideDiv=$P;};this.setInnerHTML=function(id,$o){var $T=window.frames[id];var $z=$T.contentWindow||$T.document||$T.contentDocument;if($z.document){$z=$z.document;};if($z.body==null){$z.write("<body></body>");};if($o.nodeType){$z.body.appendChild($o);}else{$z.body.innerHTML=$o;};if($l.autoStretch){if(!$l.autoStretchFirstLoadOnly||!$l.$0y){$l.stretch();$l.$0y=true;}}};this.close=function($d){this.result=$d;this.hide();};this.hide=function($k){$k=$k||{};var $r={};$r.backgroundClick=!!$k.backgroundClick;$r.result=this.result;$r.preventDefault=function(){this.preventDefault.value=true;};if(typeof this.onClose==="function"){this.onClose($r);if($r.preventDefault.value){return;}};if(this.div){this.div.style.display='none';this.hideDiv.style.display='none';if(!this.useIframe){this.div.innerHTML=null;}};window.focus();DayPilot.ModalStatic.remove(this);if(typeof this.onClosed==="function"){this.onClosed($r);}else if(this.closed){this.closed();};this.result=null;if(this.disposeOnClose&&$l.div){var p=$l.div.parentNode;p.removeChild($l.div);$l.div=null;}};this.$0z=function(){if(!$k){return;};for(var name in $k){this[name]=$k[name];}};this.$0z();};DayPilot.Modal.alert=function($U,$k){$k=$k||{};$k.height=$k.height||40;$k.useIframe=false;var $V=$k.okText||"OK";var $W=$k.cancelText||"Cancel";return DayPilot.getPromise(function($v,$X){$k.onClosed=function($r){$v($r);};var $b=new DayPilot.Modal($k);var $Q=document.createElement("div");$Q.className=$b.theme+"_inner";var $Y=document.createElement("div");$Y.className=$b.theme+"_content";$Y.innerHTML=$U;var $Z=document.createElement("div");$Z.className=$b.theme+"_buttons";var $00=document.createElement("button");$00.innerText=$V;$00.className=$b.theme+"_ok";$00.onclick=function(e){parent.DayPilot.ModalStatic.close("OK");};$Z.appendChild($00);$Q.appendChild($Y);$Q.appendChild($Z);$b.showHtml($Q);$00.focus();});};DayPilot.Modal.confirm=function($U,$k){$k=$k||{};$k.height=$k.height||40;$k.useIframe=false;var $V=$k.okText||"OK";var $W=$k.cancelText||"Cancel";return DayPilot.getPromise(function($v,$X){$k.onClosed=function($r){$v($r);};var $b=new DayPilot.Modal($k);var $Q=document.createElement("div");$Q.className=$b.theme+"_inner";var $Y=document.createElement("div");$Y.className=$b.theme+"_content";$Y.innerHTML=$U;var $Z=document.createElement("div");$Z.className=$b.theme+"_buttons";var $00=document.createElement("button");$00.innerText=$V;$00.className=$b.theme+"_ok";$00.onclick=function(e){parent.DayPilot.ModalStatic.close("OK");};var $01=document.createTextNode(" ");var $02=document.createElement("button");$02.innerText=$W;$02.className=$b.theme+"_cancel";$02.onclick=function(e){parent.DayPilot.ModalStatic.close();};$Z.appendChild($00);$Z.appendChild($01);$Z.appendChild($02);$Q.appendChild($Y);$Q.appendChild($Z);$b.showHtml($Q);$00.focus();});};DayPilot.Modal.prompt=function($U,$k){$k=$k||{};$k.height=$k.height||40;$k.useIframe=false;var $V=$k.okText||"OK";var $W=$k.cancelText||"Cancel";return DayPilot.getPromise(function($v,$X){$k.onClosed=function($r){$v($r);};var $b=new DayPilot.Modal($k);var $Q=document.createElement("div");$Q.className=$b.theme+"_inner";var $Y=document.createElement("div");$Y.className=$b.theme+"_content";$Y.innerHTML=$U;var $03=document.createElement("div");$03.className=$b.theme+"_input";var $04=document.createElement("input");$04.style.width="100%";$04.onkeydown=function(e){switch(e.keyCode){case 13:parent.DayPilot.ModalStatic.close(this.value);break;case 27:parent.DayPilot.ModalStatic.close();break;}};$03.appendChild($04);var $Z=document.createElement("div");$Z.className=$b.theme+"_buttons";var $00=document.createElement("button");$00.innerText=$V;$00.className=$b.theme+"_ok";$00.onclick=function(e){parent.DayPilot.ModalStatic.close($04.value);};var $01=document.createTextNode(" ");var $02=document.createElement("button");$02.innerText=$W;$02.className=$b.theme+"_cancel";$02.onclick=function(e){parent.DayPilot.ModalStatic.close();};$Z.appendChild($00);$Z.appendChild($01);$Z.appendChild($02);$Q.appendChild($Y);$Q.appendChild($03);$Q.appendChild($Z);$b.showHtml($Q);$04.focus();});};DayPilot.Modal.close=function($d){if(parent&&parent.DayPilot&&parent.DayPilot.ModalStatic){parent.DayPilot.ModalStatic.close($d);}else{throw "Unable to close DayPilot.Modal dialog.";}};DayPilot.Modal.closeSerialized=function(){var $a=DayPilot.Modal.opener()||DayPilot.ModalStatic.last();var $05=$a.$0m();var $06=$05.querySelectorAll("input, textarea, select");var $d={};for(var i=0;i<$06.length;i++){var $07=$06[i];var name=$07.name;if(!name){continue;};var $08=$07.value;$d[name]=$08;};DayPilot.Modal.close($d);};DayPilot.Modal.opener=function(){return parent&&parent.DayPilot&&parent.DayPilot.ModalStatic&&parent.DayPilot.ModalStatic.list[parent.DayPilot.ModalStatic.list.length-1];};if(typeof DayPilot.getPromise==="undefined"){DayPilot.getPromise=function(f){if(typeof $09!=='undefined'){return new $09(f);};DayPilot.Promise=function(f){var p=this;this.then=function($0a,$0b){$0a=$0a||function(){};$0b=$0b||function(){};f($0a,$0b);return DayPilot.getPromise(f);};this['catch']=function($0b){p.then(null,$0b);return DayPilot.getPromise(f);};};return new DayPilot.Promise(f);};}})();


